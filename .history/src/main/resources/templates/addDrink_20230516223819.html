<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Drink</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: "Poppins", sans-serif;
        }

        button:hover {
            box-shadow: 0 13px 18px 0 rgba(151, 208, 27, 0.24), 0 19px 50px 0 rgba(238, 227, 21, 0.19);
        }

        body {
            background-color: #f5f8ff;
        }

        .images {
            background-color: #ffffff;
            width: 50%;
            position: absolute;
            transform: translateX(-50%, 50%, -50%, 50%);
            left: 50%;
            right: 50%;
            box-shadow: 0 1.25em 3.43em rgba(0, 0, 0, 0.08);
            border-radius: 0.5em;
            justify-content: right;
        }

        input[type="file"] {
            display: none;
            justify-content: right;
            margin-right: 20px;
            padding-right: 20px;
        }

        .upload-images {
            display: block;
            position: relative;
            background-color: #025bee;
            color: #ffffff;
            font-size: 1.1em;
            text-align: center;
            width: 10rem;
            padding: 1em 0;
            border-radius: 0.5em;
            margin: 0 auto 1em auto;
            cursor: pointer;
        }

        #image-display {
            position: relative;
            width: 5%;
            margin: 0 auto;
            display: flex;
            justify-content: space-evenly;
            gap: 1.5em;
            flex-wrap: wrap;
        }

        #image-display figure {
            width: 10%;
        }

        #image-display img {
            width: 10%;
        }

        #image-display figcaption {
            font-size: 0.5em;
            text-align: center;
            color: #5a5861;
        }

        .active {
            border: 0.2em dashed #025bee;
        }

        #error {
            text-align: center;
            color: #ff3030;
        }
    </style>
</head>

<body class="m-10 text-lg">
    <!-- Crud PRODUCTS -->
    <div class="new_drink w-[60%] h-fit m-auto  border-[2px] border-solid border-[#4B371C] ">
        <div class="head p-3">
            <h2>New Drinks</h2>
        </div>
        <div class="w-[100%] border-[1px] border-solid border-[#4B371C]"></div>
        <div class="flex">
            <div class="add_drink w-[60%]">
                <div class="py-3 ">
                    <form action="#" class="p-3 ">
                        <div class="mt-3 grid grid-cols-2">
                            <label class="mr-5" for="dcode">Drinks code :</label>
                            <input type="text" id="dcode" name="" class="p-1 border-[2px] border-solid border-[#4B371C] rounded" placeholder="">
                        </div>
                        <div class="mt-3 grid grid-cols-2">
                            <label class="mr-5" for="dname">Drinks name :</label>
                            <input type="text" id="dname" name="" class="p-1 border-[2px] border-solid border-[#4B371C] rounded" placeholder="">
                        </div>
                        <div class="mt-3 grid grid-cols-2">
                            <label class="mr-5" for="category">Category :</label>
                            <div class="flex justify-between">
                                <select type="add-item" id="category" name="" class="p-1 border-[1px] border-solid border-[#4B371C] rounded" placeholder="">
                                    <option value="1">Hot Drinks</option >
                                    <option value="2" >Cool Drinks</option >
                                    <option value="3" >Frappe</option >
                                    <option value="4" >Food</option >
                                </select>
                                <button id="add_category" class=" w-fit h-fit bg-[#3CB043] text-center text-white font-bold cursor-pointer duration-100 rounded-lg">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[30px] h-[30px] " onclick="showPopup()">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                    </svg>
                                </button>

                            </div>

                        </div>

                        <div class="mt-3 grid grid-cols-2">
                            <label class="mr-5" for="price">Price :</label>
                            <input name="" min="0" type="number" id="price" class="p-1 border-[1px] border-solid border-[#4B371C] rounded" placeholder="">
                        </div>
                        <div class="mt-3 grid grid-cols-2">
                            <label class="mr-5" for="note">Note :</label>
                            <textarea id="note" cols="50" rows="5" name="" class="p-1 w-full border-[1px] border-solid border-[#4B371C] rounded resize-x"> </textarea>
                        </div>
                    </form>
                </div>
                <br />
                <div>
                    <button class=" py-3 bg-[#3CB043] text-center text-white font-bold px-20 m-3 inline-block cursor-pointer duration-100 rounded-lg">OK</button>
                    <button class=" py-3 px-5 bg-[#FDA172] text-center text-white  font-bold p-3 m-3 inline-block cursor-pointer duration-100 rounded-lg">Cancel</button>
                </div>
            </div>
            <div class="images">
                <input type="file" id="upload-button" multiple accept="image/*" />
                <label class="upload-images" for="upload-button"><i class="fa-solid fa-upload"></i>&nbsp; Choose Or Drop Photos
                </label>
                <div id="error"></div>
                <div id="image-display"></div>
            </div>
        </div>
    </div>
    </div>
    <!-- ADD NEW CATEGORY -->
    <div class="popup w-[100vw] h-[100vh] absolute top-[0] left-[0] bg-[#f1f1f199] hidden z-[100]">
        <main class="w-[20rem] absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%]">
            <div class="none w-full h-fit m-auto  border-[2px] border-solid border-[#4B371C]">
                <div class="head p-3">
                    <h2>New Category</h2>
                </div>
                <div class="w-[100%] border-[1px] border-solid border-[#4B371C]"></div>
                <div class=" ">
                    <form action="#" class="add_category p-3">
                        <div class="mt-3 grid grid-cols-2">
                            <label for="gcode">Category code :</label>
                            <input type="text" id="dcode" name="" class="category_code border-[1px] border-solid border-[#4B371C] rounded" placeholder="" required>
                        </div>
                        <div class="mt-3 grid grid-cols-2">
                            <label for="gname">Category name :</label>
                            <input type="text" id="gname" name="" class="category_name border-[1px] border-solid border-[#4B371C] rounded" placeholder="" required>
                        </div>
                        <br />
                        <div class="flex">
                            <input id="okay" type="submit" value="OK" class=" py-3 bg-[#3CB043] text-center font-bold text-white px-16 in m-3 p-3 line-block cursor-pointer duration-100 rounded-lg">
                            <button class="cancel py-3 px-5 bg-[#FDA172] text-center font-bold text-white p-3 m-3 inline-block cursor-pointer duration-100 rounded-lg">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>

    </div>
    <script>
        const addNewCat = document.getElementById("add_category");
        const popup = document.querySelector(".popup");
        const form_add_category = document.querySelector(".add_category ");

        addNewCat.addEventListener("click", showPopup);

        function showPopup() {
            popup.classList.remove('hidden')
        }

        form_add_category.addEventListener("submit", () => {
            clear()
            popup.classList.add('hidden')
        });

        document.querySelector('.cancel').addEventListener('click', () => {
            clear()
            popup.classList.add('hidden')
        })

        popup.addEventListener('click', (e) => {
            const target = e.target;

            if (target.classList.contains('popup')) {
                popup.classList.add('hidden')
            }
        })

        const clear = () => {
            document.querySelector('.category_name').value = ""
            document.querySelector('.category_code').value = ""
        }

        let uploadButton = document.getElementById("upload-button");
        let chosenImage = document.getElementById("chosen-image");
        let fileName = document.getElementById("file-name");
        let container = document.querySelector(".images");
        let error = document.getElementById("error");
        let imageDisplay = document.getElementById("image-display");

        const fileHandler = (file, name, type) => {
            if (type.split("/")[0] !== "image") {
                //File Type Error
                error.innerText = "Please upload an image file";
                return false;
            }
            error.innerText = "";
            let reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onloadend = () => {
                //image and file name
                let imageContainer = document.createElement("figure");
                let img = document.createElement("img");
                img.src = reader.result;
                imageContainer.appendChild(img);
                imageContainer.innerHTML += `<figcaption>${name}</figcaption>`;
                imageDisplay.appendChild(imageContainer);
            };
        };

        //Upload Button
        uploadButton.addEventListener("change", () => {
            imageDisplay.innerHTML = "";
            Array.from(uploadButton.files).forEach((file) => {
                fileHandler(file, file.name, file.type);
            });
        });

        container.addEventListener(
            "dragenter",
            (e) => {
                e.preventDefault();
                e.stopPropagation();
                container.classList.add("active");
            },
            false
        );

        container.addEventListener(
            "dragleave",
            (e) => {
                e.preventDefault();
                e.stopPropagation();
                container.classList.remove("active");
            },
            false
        );

        container.addEventListener(
            "dragover",
            (e) => {
                e.preventDefault();
                e.stopPropagation();
                container.classList.add("active");
            },
            false
        );

        container.addEventListener(
            "drop",
            (e) => {
                e.preventDefault();
                e.stopPropagation();
                container.classList.remove("active");
                let draggedData = e.dataTransfer;
                let files = draggedData.files;
                imageDisplay.innerHTML = "";
                Array.from(files).forEach((file) => {
                    fileHandler(file, file.name, file.type);
                });
            },
            false
        );

        window.onload = () => {
            error.innerText = "";
        };
    </script>
</body>

</html>